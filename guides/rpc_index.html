<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RPC Deployment - Parachain Devops Guide</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
                <link rel="stylesheet" href="../last-changed.css">
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../guides/index.html"><strong aria-hidden="true">2.</strong> How-to Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/parachain_deployment.html"><strong aria-hidden="true">2.1.</strong> Parachain Deployment</a></li><li class="chapter-item expanded "><a href="../guides/rpc_index.html" class="active"><strong aria-hidden="true">2.2.</strong> RPC Deployment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/rpc_kubernetes.html"><strong aria-hidden="true">2.2.1.</strong> Kubernetes</a></li></ol></li><li class="chapter-item expanded "><a href="../guides/readiness-checklist.html"><strong aria-hidden="true">2.3.</strong> Parachain Readiness Checklist</a></li></ol></li><li class="chapter-item expanded "><a href="../explanations/index.html"><strong aria-hidden="true">3.</strong> Explanations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployments/index.html"><strong aria-hidden="true">3.1.</strong> Deployment Options</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployments/roles.html"><strong aria-hidden="true">3.1.1.</strong> Node Roles</a></li><li class="chapter-item expanded "><a href="../deployments/targets.html"><strong aria-hidden="true">3.1.2.</strong> Remote Targets</a></li><li class="chapter-item expanded "><a href="../deployments/options.html"><strong aria-hidden="true">3.1.3.</strong> Role Specific Arguments</a></li></ol></li><li class="chapter-item expanded "><a href="../serverdeploy/index.html"><strong aria-hidden="true">3.2.</strong> Server Deployments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../serverdeploy/systemd.html"><strong aria-hidden="true">3.2.1.</strong> Systemd</a></li><li class="chapter-item expanded "><a href="../serverdeploy/logging.html"><strong aria-hidden="true">3.2.2.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../serverdeploy/automation.html"><strong aria-hidden="true">3.2.3.</strong> Automation</a></li></ol></li><li class="chapter-item expanded "><a href="../kubernetes/index.html"><strong aria-hidden="true">3.3.</strong> Kubernetes Deployments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../kubernetes/helm.html"><strong aria-hidden="true">3.3.1.</strong> Helm Chart</a></li><li class="chapter-item expanded "><a href="../kubernetes/key_injection_test.html"><strong aria-hidden="true">3.3.2.</strong> Key Injection Example</a></li><li class="chapter-item expanded "><a href="../kubernetes/testnetmanager.html"><strong aria-hidden="true">3.3.3.</strong> Testnet Manager</a></li></ol></li><li class="chapter-item expanded "><a href="../monitoring/index.html"><strong aria-hidden="true">3.4.</strong> Monitoring</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../monitoring/infrastructure.html"><strong aria-hidden="true">3.4.1.</strong> Intrastructure</a></li><li class="chapter-item expanded "><a href="../monitoring/polkadot_sdk.html"><strong aria-hidden="true">3.4.2.</strong> Polkadot SDK</a></li></ol></li><li class="chapter-item expanded "><a href="../explanations/keys_accounts.html"><strong aria-hidden="true">3.5.</strong> Keys And Accounts</a></li><li class="chapter-item expanded "><a href="../explanations/chainspecs.html"><strong aria-hidden="true">3.6.</strong> Chainspecs</a></li></ol></li><li class="chapter-item expanded "><a href="../references/index.html"><strong aria-hidden="true">4.</strong> References</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Parachain Devops Guide</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/paritytech/devops-guide" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                                        <a href="https://github.com/paritytech/devops-guide/edit/master/src/guides/rpc_index.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rpc-overview"><a class="header" href="#rpc-overview">RPC Overview</a></h1>
<p>An RPC node is a server that allows external applications to interact with the Polkadot chain. This interaction is facilitated through a set of standardized APIs which enable the execution of various operations and retrieval of blockchain data. Here are some key points about an RPC node in Polkadot:</p>
<p>Functions of an RPC Node:
<em>Querying Blockchain Data</em>: RPC nodes can be used to fetch information from the blockchain, such as block details, transaction histories, account balances, and other state information.
<em>Submitting Transactions</em>: External applications can use RPC nodes to broadcast transactions to the network. This includes sending tokens, executing smart contracts, or any other transaction type supported by Polkadot.
<em>Subscription to Events</em>: RPC nodes can provide real-time updates on blockchain events, such as new blocks being added, changes in account balances, or other relevant blockchain events.
<em>Chain State and Metadata</em>: RPC nodes allow applications to query the current state of the blockchain, as well as metadata about the runtime environment, including the version of the Polkadot runtime, the list of available RPC methods, and more.</p>
<h3 id="type-of-rpc-nodes"><a class="header" href="#type-of-rpc-nodes">Type of RPC Nodes</a></h3>
<p>There are two common types of RPC nodes: <em>archive</em> nodes and <em>pruned</em> nodes, which differ in data storage and access.</p>
<ul>
<li>
<p><strong>Archive Nodes</strong>:</p>
<ul>
<li>Store the entire blockchain history, providing full state access for tasks requiring historical data, such as analytics and audits.</li>
<li>Require substantial disk space.</li>
<li><strong>Important Flag</strong>: <code>--state-pruning archive --blocks-pruning archive</code> (Ensures the node retains all historical data)</li>
</ul>
</li>
<li>
<p><strong>Pruned Nodes</strong>:</p>
<ul>
<li>Retain only recent data, offering limited historical access but using significantly less storage.</li>
<li>Suitable for most day-to-day operations and network security.</li>
<li><strong>Important Flag</strong>: <code>--state-pruning 1000</code> (Only keeps last 1000 of finalized blocks)</li>
</ul>
</li>
</ul>
<p>While archive nodes are essential for applications needing comprehensive historical data, pruned nodes are sufficient for wallets, validators, and other typical uses.</p>
<h3 id="important-flags-for-running-an-rpc-node"><a class="header" href="#important-flags-for-running-an-rpc-node">Important Flags for Running an RPC Node</a></h3>
<ol>
<li>
<p><strong><code>--rpc-methods</code></strong>: Defines which RPC methods are available.</p>
<ul>
<li>Example: <code>--rpc-methods=Unsafe</code></li>
<li>Options: <code>Auto</code>, <code>Safe</code>, <code>Unsafe</code></li>
</ul>
</li>
<li>
<p><strong><code>--rpc-cors</code></strong>: Specifies the Cross-Origin Resource Sharing (CORS) settings.</p>
<ul>
<li>Example: <code>--rpc-cors=all</code> (Allow all origins)</li>
<li>Example: <code>--rpc-cors=http://localhost:3000</code> (Allow specific origin)</li>
</ul>
</li>
<li>
<p><strong><code>--rpc-port</code></strong>: Sets the port on which the RPC server listens.</p>
<ul>
<li>Example: <code>--rpc-port=9933</code></li>
</ul>
</li>
<li>
<p><strong><code>--rpc-external</code></strong>: Allows RPC connections from external sources.</p>
<ul>
<li>Example: <code>--rpc-external</code></li>
</ul>
</li>
<li>
<p><strong><code>--rpc-rate-limit</code></strong>: RPC rate limiting (calls/minute) for each connection..</p>
<ul>
<li>Example: <code>--rpc-rate-limit=100</code></li>
</ul>
</li>
<li>
<p><strong><code>--unsafe-rpc-external</code></strong>: Same as <code>--rpc-external</code></p>
<ul>
<li>Example: <code>--unsafe-rpc-external</code></li>
</ul>
</li>
</ol>
<h3 id="securing-the-ws-port"><a class="header" href="#securing-the-ws-port">Securing the WS Port</a></h3>
<p>Securing the WebSocket (WS) port is essential to prevent unauthorized access and potential security threats such as data breaches, man-in-the-middle attacks, and denial-of-service attacks. It is also necessary to access the node from the Polkadot-js UI.</p>
<h4 id="tools-for-securing-websocket-connections"><a class="header" href="#tools-for-securing-websocket-connections">Tools for Securing WebSocket Connections</a></h4>
<p>A list of most common tools available that supports securing websocket:</p>
<ol>
<li>
<p><strong>NGINX</strong>: A popular web server and reverse proxy that can be configured to handle WebSocket connections securely.</p>
<ul>
<li><strong>Documentation</strong>: <a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/">NGINX WebSocket Support</a></li>
</ul>
</li>
<li>
<p><strong>HAProxy</strong>: A high-performance TCP/HTTP load balancer that can manage WebSocket connections securely.</p>
<ul>
<li><strong>Documentation</strong>: <a href="http://www.haproxy.org/#docs">HAProxy WebSocket Support</a></li>
</ul>
</li>
<li>
<p><strong>Traefik</strong>: A modern reverse proxy and load balancer that supports WebSocket connections and integrates well with various security features.</p>
<ul>
<li><strong>Documentation</strong>: <a href="https://doc.traefik.io/traefik/providers/websocket/">Traefik WebSocket Support</a></li>
</ul>
</li>
<li>
<p><strong>Cloudflare</strong>: Provides WebSocket support along with security features like DDoS protection and WAF.</p>
<ul>
<li><strong>Documentation</strong>: <a href="https://developers.cloudflare.com/using-cloudflare/website-performance/websockets/">Cloudflare WebSocket Support</a></li>
</ul>
</li>
<li>
<p><strong>AWS Application Load Balancer (ALB)</strong>: Supports WebSocket connections and integrates with AWS WAF for additional security.</p>
<ul>
<li><strong>Documentation</strong>: <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html">AWS ALB WebSocket Support</a></li>
</ul>
</li>
<li>
<p><strong>Caddy</strong>: A web server with automatic HTTPS that can also handle WebSocket connections securely.</p>
<ul>
<li><strong>Documentation</strong>: <a href="https://caddyserver.com/docs/reverse-proxy#websocket">Caddy WebSocket Support</a></li>
</ul>
</li>
</ol>
<h3 id="how-to-guides"><a class="header" href="#how-to-guides">How-to Guides</a></h3>
<p>This section provides a deployment guide for an RPC node via Ansible and Kubernetes.</p>
<footer id="last-change">Last change: 2024-07-24, commit: <a href="https://github.com/paritytech/devops-guide/commit/b14eceb">b14eceb</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../guides/parachain_deployment.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../guides/rpc_kubernetes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../guides/parachain_deployment.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../guides/rpc_kubernetes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
